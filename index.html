<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Re:Al í›„ê¸° ì‘ì„±</title>
  <style>
      * { margin: 0; padding: 0; box-sizing: border-box; }
      body {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Malgun Gothic', sans-serif;
          background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
          min-height: 100vh;
          padding: 20px;
          display: flex;
          justify-content: center;
          align-items: center;
      }

      .container {
          max-width: 700px;
          margin: 0 auto;
          width: 100%; 
          background: white;
          border-radius: 20px;
          padding: 40px; 
          box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      }

      h1 {
          text-align: center;
          color: #FFA500;
          margin-bottom: 15px;
          font-size: 28px;
      }
      .subtitle {
          text-align: center;
          color: #ff6b6b;
          margin-bottom: 30px;
          font-size: 16px;
          font-weight: 600;
      }
      .divider {
          text-align: center;
          color: #ddd;
          margin-bottom: 30px;
          letter-spacing: 2px;
      }
      .page {
          display: none;
      }
      .page.active {
          display: block;
          animation: fadeIn 0.3s;
      }
      @keyframes fadeIn {
          from { opacity: 0; transform: translateY(10px); }
          to { opacity: 1; transform: translateY(0); }
      }
      .form-group {
          margin-bottom: 25px;
      }
      label {
          display: block;
          margin-bottom: 8px;
          font-weight: 600;
          color: #333;
          font-size: 15px;
      }
      .required { color: #ff6b6b; } 
      
      input[type="text"], input[type="tel"], textarea {
          width: 100%;
          padding: 14px;
          border: 2px solid #e0e0e0;
          border-radius: 10px;
          font-size: 16px;
          transition: all 0.3s;
          font-family: inherit;
      }
      input:focus, textarea:focus {
          outline: none;
          border-color: #FFD700;
          box-shadow: 0 0 0 3px rgba(255, 215, 0, 0.3);
      }
      
      /* [NEW] í¬ì»¤ìŠ¤ ì‹œ placeholder(ì˜ˆì‹œ ë¬¸êµ¬) ìˆ¨ê¹€ ì²˜ë¦¬ */
      input:focus::placeholder, textarea:focus::placeholder {
          color: transparent;
      }

      textarea {
          min-height: 150px;
          resize: vertical;
          line-height: 1.6;
      }
      
      /* ì—°ë½ì²˜ 3ì¹¸ */
      .phone-group {
          display: flex;
          gap: 10px;
          align-items: center;
      }
      .phone-group input {
          flex: 1;
          text-align: center;
      }
      .phone-group input:first-child {
          flex: 0.8;
          background: #f5f5f5;
          color: #666;
      }
      
      /* ë¼ë””ì˜¤ ë²„íŠ¼ ê·¸ë£¹ */
      .radio-group {
          display: flex;
          gap: 10px;
      }
      .radio-option {
          flex: 1;
          display: flex;
          align-items: center;
          justify-content: center;
          padding: 15px 10px;
          border: 2px solid #e0e0e0;
          border-radius: 10px;
          cursor: pointer;
          transition: all 0.3s;
          text-align: center;
      }
      .radio-option:hover {
          border-color: #FFD700;
          background: #FFFDE7;
      }
      .radio-option input[type="radio"] {
          display: none;
      }
      .radio-option.selected {
          border-color: #FFD700;
          background: #FFFDE7;
          font-weight: 600;
      }
      
      .guide {
          font-size: 14px;
          color: #666;
          margin-bottom: 12px;
          line-height: 1.6;
          background: #f8f9fa;
          padding: 12px;
          border-radius: 8px;
      }
      
      .char-count {
          text-align: right;
          font-size: 13px;
          color: #999;
          margin-top: 5px;
      }
      .char-count.valid { color: #28a745; }
      
      .stars {
          display: flex;
          gap: 8px;
          font-size: 40px;
          margin-top: 10px;
      }
      .star {
          cursor: pointer;
          transition: all 0.2s;
          user-select: none;
      }
      .star:hover {
          transform: scale(1.2);
      }
      .star.inactive { 
          filter: grayscale(100%);
          opacity: 0.3;
      }
      .star.active { 
          filter: grayscale(0%);
          animation: starPop 0.3s;
      }
      @keyframes starPop {
          0% { transform: scale(1); }
          50% { transform: scale(1.3); }
          100% { transform: scale(1); }
      }

      .button-group {
          display: flex;
          gap: 10px;
          margin-top: 30px;
      }
      .btn {
          flex: 1;
          padding: 16px;
          border: none;
          border-radius: 10px;
          font-size: 17px;
          font-weight: 600;
          cursor: pointer;
          transition: all 0.3s;
      }
      .btn-prev {
          background: #f0f0f0;
          color: #666;
      }
      .btn-prev:hover {
          background: #e0e0e0;
      }
      .btn-next, .btn-submit {
          background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
          color: white;
      }
      .btn-next:hover, .btn-submit:hover {
          transform: translateY(-2px);
          box-shadow: 0 5px 20px rgba(255, 215, 0, 0.4);
      }
      
      /* í˜ì´ì§€ ì¸ë””ì¼€ì´í„° */
      .page-indicator {
          text-align: center;
          margin-bottom: 20px; 
          font-size: 14px;
          color: #999;
      }
      .page-dots {
          display: flex;
          justify-content: center;
          gap: 10px; 
          margin-bottom: 10px;
      }
      .dot {
          width: 10px;
          height: 10px;
          border-radius: 50%;
          background: #ddd;
          transition: all 0.3s;
      }
      .dot.active {
          background: #FFD700;
          width: 28px;
          border-radius: 5px;
      }
      #pageText {
          display: inline-block;
          padding: 5px 15px;
          border-radius: 15px;
          font-size: 15px;
          font-weight: 700;
          color: #FFA500; 
          background: #FFFDE7; 
          border: 1px solid #FFD700;
      }
      
      .loading {
          display: none;
          text-align: center;
          padding: 40px;
      }
      .spinner {
          border: 4px solid #f3f3f3;
          border-top: 4px solid #FFD700;
          border-radius: 50%;
          width: 50px;
          height: 50px;
          animation: spin 1s linear infinite;
          margin: 0 auto 20px;
      }
      @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
      }
      .success-message {
          display: none;
          text-align: center;
          padding: 40px;
      }
      .success-icon {
          font-size: 60px;
          margin-bottom: 20px;
      }
      .success-message h2 {
          color: #FFA500;
          margin-bottom: 15px;
          font-size: 24px;
      }
      .success-message p {
          color: #666;
          line-height: 1.8;
          font-size: 15px;
      }
  </style>
</head>
<body>
  <div class="container">
    <div id="form-container">
      
      <div class="page-indicator">
        <div class="page-dots">
          <div class="dot active" data-page="1"></div>
          <div class="dot" data-page="2"></div>
          <div class="dot" data-page="3"></div>
        </div>
        <span id="pageText">1 / 3</span> 
      </div>
      
      <h1>âœ¨í›„ê¸° ì‘ì„±</h1>
      <p class="subtitle">ì†Œì¤‘í•œ í›„ê¸° ê°ì‚¬í•©ë‹ˆë‹¤!</p>
      <div class="divider">â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</div>
      
      <form id="reviewForm">
        <div class="page active" id="page1">
          <div class="form-group">
            <label>íšŒì› ì„±ëª… <span class="required">*</span></label>
            <input type="text" name="nickname" id="nickname" required placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”" autofocus>
          </div>

          <div class="form-group">
            <label>ì—°ë½ì²˜ <span class="required">*</span></label>
            <div class="phone-group">
              <input type="tel" id="phone1" value="010" readonly>
              <input type="tel" id="phone2" maxlength="4" required placeholder="1234" inputmode="numeric" pattern="[0-9]*">
              <input type="tel" id="phone3" maxlength="4" required placeholder="1234" inputmode="numeric" pattern="[0-9]*">
            </div>
            <input type="hidden" name="phone" id="phoneHidden" required>
          </div>
          
          <div class="button-group">
            <button type="button" class="btn btn-next" id="nextBtn1">ë‹¤ìŒ</button>
          </div>
        </div>

        <div class="page" id="page2">
          <div class="form-group" style="text-align: center;"> 
            <div class="stars" id="starRating" style="justify-content: center; margin-top: 15px; margin-bottom: 25px;"> 
              <span class="star active" data-rating="1">â­</span>
              <span class="star active" data-rating="2">â­</span>
              <span class="star active" data-rating="3">â­</span>
              <span class="star active" data-rating="4">â­</span>
              <span class="star active" data-rating="5">â­</span>
            </div>
              <input type="hidden" name="rating" id="ratingValue" value="5" required>
          </div>

          <div class="form-group">
            <label>í›„ê¸° ë‚´ìš© (ìµœì†Œ 50ì) <span class="required">*</span></label>
            <div class="guide">
              ğŸ’¡ ê°€ì´ë“œ:<br>
              â€¢ ì–´ë–¤ ë³€í™”ë¥¼ ëŠê¼ˆë‚˜ìš”?<br>â€¢ ê°€ì¥ ì¢‹ì•˜ë˜ ì ì€? / ì¶”ì²œí•˜ê³  ì‹¶ì€ ì´ìœ ëŠ”?<br><br>
              <span style="color: #999; font-size: 12px;">
                <strong><ê°€ì¥ ë§ì•˜ë˜ í›„ê¸°></strong><br>
                <strong>P-ìŠ¤íŠ¸ë ˆì¹­)</strong> "ì „ë¬¸ê°€ì˜ ì†ê¸¸ì´ ë‹¤ë¥´ê¸´ ë‹¤ë¥´ë„¤ìš”", "ë­ê°€ ë¬¸ì œì˜€ëŠ”ì§€ í™•ì‹¤íˆ ì•Œì•˜ì–´ìš”", "ê±°ë¶ëª©ì´ í™• í´ì§€ëŠ” ëŠë‚Œ!"<br><br>
                <strong>ì¬í™œìš´ë™)</strong> "í†µì¦ ì›ì¸ì„ ì•Œì•˜ì–´ìš”", "ê´€ë¦¬ ë°©ë²•ì„ ë°°ìš°ë‹ˆê¹Œ ê´€ë¦¬ê°€ ê°€ëŠ¥í•´ì¡Œì–´ìš”", "ì œ ëª¸ì„ ì œëŒ€ë¡œ ì“°ëŠ” ë²•ì„ ë°°ìš´ ê¸°ë¶„ì´ì—ìš”"<br><br>
                <strong>ì‘ì€ì–¼êµ´)</strong> "í„±ì„ ì´ ì‚´ì•„ë‚¬ì–´ìš”", "ê¾¸ì¤€í•˜ê²Œ í•˜ë©´ ì§„ì§œ ë  ê²ƒ ê°™ì€ ëŠë‚Œì´ í™• ë“¤ì—ˆì–´ìš”", "ê·¸ë™ì•ˆ ë°›ì•˜ë˜ ì—ìŠ¤í…Œí‹±ì´ë€ ì™„ì „ ë‹¬ë¼ìš”"<br><br>
                <strong>ë³µë¶€ê´€ë¦¬)</strong> "ì†ì´ ì •ë§ í¸ì•ˆí•´ì ¸ìš”", "ë°”ì§€ê°€ ì‚¬ì´ì¦ˆê°€ ì¤„ì—ˆì–´ìš”", "ì•„ë¡œë§ˆ í–¥ì€ ì‹ ì„¸ê³„ì˜€ì–´"<br><br>
                <strong>ì¸ì‚¬ì´ë“œ)</strong> "ì§„ì§œ ì‹ ê¸°í•´ìš”. ì„±í–¥ë¶„ì„ ì™„ì „ ì •í™•í•´ìš”", "ëª©í‘œë¥¼ ì°¾ì€ê²ƒ ê°™ì•„ìš”", "ë‚´ ì¬ëŠ¥ì´ ë­”ì§€ í™•ì‹¤íˆ ì•Œê² ì–´ìš”"<br><br>
              </span>
            </div>
            
            <textarea name="review" id="reviewText" required placeholder="í›„ê¸°ë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”..."></textarea>
            <div class="char-count" id="charCountDiv">
              <span id="charCount">0</span> / 50ì
            </div>
          </div>

          <div class="button-group">
            <button type="button" class="btn btn-prev" onclick="showPage(1)">ì´ì „</button>
            <button type="button" class="btn btn-next" id="nextBtn2">ë‹¤ìŒ</button>
          </div>
        </div>

        <div class="page" id="page3">
          <div class="form-group">
            <label>ì¶”ì²œí•˜ê³  ì‹¶ì€ ë¶„ì´ ê³„ì‹ ê°€ìš”? (ì„ íƒ)</label>

            <div class="guide" style="margin-bottom: 15px; background: linear-gradient(135deg, #fff3cd 0%, #ffe8a1 100%); border-left: 4px solid #ff6b6b;"> 
              <span style="font-size: 15px; color: #333;">ğŸ <strong>ì†Œê°œí•˜ê³  ì‹¶ì€ ë¶„ì˜ ì—°ë½ì²˜ë¥¼ ë‚¨ê²¨ì£¼ì„¸ìš”!</strong></span><br>
              <span style="font-size: 13px; color: #856404;">â†’ ì‚¬ìš© ê°€ëŠ¥í•œ 1íšŒ ë¬´ë£Œ ì¿ í°ì„ ë“œë ¤ìš”.</span>
            </div>

            <div class="form-group">
                <div class="phone-group">
                  <input type="tel" id="refPhone1" value="010" readonly>
                  <input type="tel" id="refPhone2" maxlength="4" placeholder="1234" inputmode="numeric" pattern="[0-9]*">
                  <input type="tel" id="refPhone3" maxlength="4" placeholder="1234" inputmode="numeric" pattern="[0-9]*">
                </div>
                <input type="hidden" name="referralPhone" id="referralPhoneHidden">
            </div>

            <div class="form-group">
              <label>ê´€ê³„</label>
              <div class="radio-group">
                <label class="radio-option">
                  <input type="radio" name="referralName" value="ê°€ì¡±">
                  <span>ê°€ì¡±</span>
                </label>
                <label class="radio-option">
                  <input type="radio" name="referralName" value="ì¹œêµ¬">
                  <span>ì¹œêµ¬</span>
                </label>
                <label class="radio-option">
                  <input type="radio" name="referralName" value="ì§€ì¸">
                  <span>ì§€ì¸</span>
                </label>
              </div>
            </div>

            <div id="couponProgramSelect" style="margin-top: 25px; padding: 15px; background: #FFFDE7; border-radius: 10px; border: 2px solid #FFA500;">
              <label style="font-size: 14px; color: #FFA500; margin-bottom: 8px; font-weight: 600;">ì¿ í° í”„ë¡œê·¸ë¨ ì„ íƒ:</label>
              <div class="radio-group">
                <div style="display: flex; width: 100%; justify-content: space-between; margin-bottom: 10px;">
                  <label class="radio-option"><input type="radio" name="couponProgram" value="P-ìŠ¤íŠ¸ë ˆì¹­"><span>P-ìŠ¤íŠ¸ë ˆì¹­</span></label>
                  <label class="radio-option"><input type="radio" name="couponProgram" value="ì¬í™œìš´ë™"><span>ì¬í™œìš´ë™</span></label>
                  <label class="radio-option"><input type="radio" name="couponProgram" value="ì‘ì€ì–¼êµ´"><span>ì‘ì€ì–¼êµ´</span></label>
                </div>
                <div style="display: flex; width: 100%; justify-content: center; gap: 20px;">
                  <label class="radio-option"><input type="radio" name="couponProgram" value="ë³µë¶€ê´€ë¦¬"><span>ë³µë¶€ê´€ë¦¬</span></label>
                  <label class="radio-option"><input type="radio" name="couponProgram" value="ì¸ì‚¬ì´ë“œ"><span>ì¸ì‚¬ì´ë“œ</span></label>
                </div>
              </div>
              <div id="couponDescription" style="margin-top: 15px; padding: 10px; border-radius: 8px; background: #ffffff; border-left: 3px solid #FFA500; font-size: 13px; min-height: 40px; color: #333;">
                í”„ë¡œê·¸ë¨ì„ ì„ íƒí•˜ì‹œë©´ ê°„ëµí•œ ì„¤ëª…ì´ í‘œì‹œë©ë‹ˆë‹¤.
              </div>
            </div> Â  Â  Â  Â  Â  Â 
          </div>

          <div class="button-group">
            <button type="button" class="btn btn-prev" onclick="showPage(2)">ì´ì „</button>
            <button type="submit" class="btn btn-submit" id="submitBtn">ì œì¶œí•˜ê¸°</button>
          </div>
        </div>

      </form>
    </div>

    <div class="loading" id="loadingDiv">
      <div class="spinner"></div>
      <p id="loadingText">â³ ì œì¶œ ì¤‘ì…ë‹ˆë‹¤... <span id="countdown"></span></p>
    </div>

    <div class="success-message" id="successMessage">
      <div class="success-icon">âœ…</div>
      <h2>í›„ê¸° ê°ì‚¬í•©ë‹ˆë‹¤!</h2>
      <p>
        ê±´ê°•ê³¼ íë§ì˜ ë‚˜ì¹¨ë°˜ | íë§íŠ¸ë¦¬<br>
      </p>
    </div>
  </div>

  <script>
    let currentPage = 1;

    // í”„ë¡œê·¸ë¨ ì„¤ëª… ë°ì´í„°
    const couponDescriptions = {
      "P-ìŠ¤íŠ¸ë ˆì¹­": "<strong>ëª©ì :</strong> ë§Œì„± í†µì¦ ê´€ë¦¬ ë° ìì„¸ êµì •.<br> <strong>ì´ì :</strong> ìœ ì—°ì„± íšŒë³µê³¼ ê±°ë¶ëª©, êµ½ì€ ì–´ê¹¨, í—ˆë¦¬ ë»ê·¼í•¨ ì™„í™”ì— íš¨ê³¼ì ì…ë‹ˆë‹¤.",
      "ì¬í™œìš´ë™": "<strong>ëª©ì :</strong> ê·¼ê¸°ëŠ¥ íšŒë³µ ë° ì…€í”„ í†µì¦ ê´€ë¦¬.<br> <strong>ì´ì :</strong> í†µì¦ì˜ ê·¼ë³¸ ì›ì¸ì„ ì´í•´í•˜ê³ , ì…€í”„ í†µì¦ê´€ë¦¬ ë°©ë²•ê³¼ ê·¼ê¸°ëŠ¥ íšŒë³µì— ì§‘ì¤‘í•©ë‹ˆë‹¤.",
      "ì‘ì€ì–¼êµ´": "<strong>ëª©ì :</strong> í„±ë¼ì¸ ê°œì„  ë° ë¦¼í”„ ìˆœí™˜ ì´‰ì§„.<br> <strong>ì´ì :</strong> Vë¼ì¸, í„±ì„  ì •ë¦¬, ë¶€ì¢… ì œê±° ë° ì•ˆë©´ ìœ¤ê³½ ê´€ë¦¬ì— íƒì›”í•©ë‹ˆë‹¤.",
      // ìˆ˜ì •ëœ ë¶€ë¶„: (ì¿ í°ì€ ì„±í–¥ë§Œ ê²€ì‚¬) ì¶”ê°€ë¨
      "ë³µë¶€ê´€ë¦¬": "<strong>ëª©ì :</strong> ì‹¬ë¶€ ì˜¨ë„ ìƒìŠ¹ ë° ì¥ê¸° ìˆœí™˜ ì´‰ì§„.<br> <strong>ì´ì :</strong> ë³µë¶€ ë¶€ì¢… ë° ë…ì†Œ ë°°ì¶œ, ë”ë¶ˆì–´ íƒ„ë ¥ ìˆëŠ” í—ˆë¦¬ ë¼ì¸ ê´€ë¦¬ì— íš¨ê³¼ì ì…ë‹ˆë‹¤.",
      "ì¸ì‚¬ì´ë“œ": "<strong>ëª©ì :</strong> ë‚´ë©´ì˜ ì„±í–¥ ë° ì¬ëŠ¥ ë¶„ì„.(ì¿ í°ì€ ì„±í–¥ë§Œ ê²€ì‚¬)<br> <strong>ì´ì :</strong> ì ì¬ë ¥ ë°œê²¬, ëª©í‘œ ì„¤ì •, ìê¸° ì´í•´ ì¦ì§„ì„ í†µí•´ ì¸ìƒì˜ ë°©í–¥ì„±ì„ ì œì‹œí•©ë‹ˆë‹¤."      
    };

    // í˜ì´ì§€ ë¡œë“œ ì‹œ ì²« ë²ˆì§¸ ì…ë ¥ì¹¸ì— í¬ì»¤ìŠ¤
    window.addEventListener('load', function() {
      document.getElementById('nickname').focus();
    });

    // í˜ì´ì§€ ì „í™˜ í•¨ìˆ˜ (ìˆ˜ì •ë¨)
    function showPage(pageNum) {
      document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
      document.getElementById('page' + pageNum).classList.add('active');
      
      document.querySelectorAll('.dot').forEach(d => d.classList.remove('active'));
      document.querySelector(`.dot[data-page="${pageNum}"]`).classList.add('active');
      
      document.getElementById('pageText').textContent = `${pageNum} / 3`;
      currentPage = pageNum;

      window.scrollTo(0, 0);

      // â–¼â–¼â–¼ [í¬ì»¤ìŠ¤ ë¡œì§ ìˆ˜ì • ë¶€ë¶„] â–¼â–¼â–¼
      if (pageNum === 2) {
        // 2í˜ì´ì§€ ì§„ì… ì‹œ: í›„ê¸° ì‘ì„±ì¹¸ í¬ì»¤ìŠ¤
        setTimeout(() => document.getElementById('reviewText').focus(), 100);
      } else if (pageNum === 3) {
        // 3í˜ì´ì§€ ì§„ì… ì‹œ: ì§€ì¸ ì—°ë½ì²˜(ê°€ìš´ë° ìë¦¬) í¬ì»¤ìŠ¤
        setTimeout(() => document.getElementById('refPhone2').focus(), 100);
      }
    }

    // ë³¸ì¸ ì—°ë½ì²˜ ìë™ ì´ë™ ë° í¬ë§·íŒ…
    const phone2 = document.getElementById('phone2');
    const phone3 = document.getElementById('phone3');

    function setupPhoneInput(p2, p3, hiddenInput, p1Value) {
        p2.addEventListener('input', function(e) {
            e.target.value = e.target.value.replace(/[^0-9]/g, '');
            if (e.target.value.length === 4) {
                p3.focus();
            }
            updateHiddenPhone(p2, p3, hiddenInput, p1Value);
        });

        p3.addEventListener('input', function(e) {
            e.target.value = e.target.value.replace(/[^0-9]/g, '');
            updateHiddenPhone(p2, p3, hiddenInput, p1Value);
        });
    }

    function updateHiddenPhone(p2, p3, hiddenInput, p1Value) {
        const p2Val = p2.value;
        const p3Val = p3.value;
        // ë‘˜ ì¤‘ í•˜ë‚˜ë¼ë„ ì…ë ¥ë˜ë©´ hidden ê°’ ì—…ë°ì´íŠ¸
        if(p2Val || p3Val) {
            hiddenInput.value = `${p1Value}-${p2Val}-${p3Val}`;
        } else {
            hiddenInput.value = '';
        }
    }

    // ë³¸ì¸ ì—°ë½ì²˜ ì„¤ì •
    setupPhoneInput(phone2, phone3, document.getElementById('phoneHidden'), document.getElementById('phone1').value);

    // ì§€ì¸ ì—°ë½ì²˜ ì„¤ì •
    const refPhone2 = document.getElementById('refPhone2');
    const refPhone3 = document.getElementById('refPhone3');
    setupPhoneInput(refPhone2, refPhone3, document.getElementById('referralPhoneHidden'), document.getElementById('refPhone1').value);


    // Page 1 -> Page 2 (ë³¸ì¸ ì •ë³´ í™•ì¸)
    document.getElementById('nextBtn1').addEventListener('click', function() {
      const nickname = document.getElementById('nickname').value.trim();
      const phone2Val = phone2.value.trim();
      const phone3Val = phone3.value.trim();

      if (!nickname) {
        alert('ì´ë¦„ or ë³„ëª…ì„ ì‘ì„±í•´ì£¼ì„¸ìš”.');
        document.getElementById('nickname').focus();
        return;
      }
      if (phone2Val.length !== 4) {
        alert('ì—°ë½ì²˜ë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”.\në‘ ë²ˆì§¸ ì¹¸ì— 4ìë¦¬ ìˆ«ìë¥¼ ì…ë ¥í•˜ì„¸ìš”.');
        phone2.focus();
        return;
      }
      if (phone3Val.length !== 4) {
        alert('ì—°ë½ì²˜ë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”.\nì„¸ ë²ˆì§¸ ì¹¸ì— 4ìë¦¬ ìˆ«ìë¥¼ ì…ë ¥í•˜ì„¸ìš”.');
        phone3.focus();
        return;
      }

      // ë³¸ì¸ í°ë²ˆí˜¸ ìµœì¢… ì—…ë°ì´íŠ¸
      document.getElementById('phoneHidden').value = `${document.getElementById('phone1').value}-${phone2Val}-${phone3Val}`;
      showPage(2);
    });

    // Page 2 -> Page 3 (í›„ê¸° ë° ë³„ì  í™•ì¸)
    document.getElementById('nextBtn2').addEventListener('click', function() {
        const review = document.getElementById('reviewText').value.trim();
        const rating = document.getElementById('ratingValue').value;

        if (!rating) {
            alert('ë³„ì ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
            return;
        }
        if (review.length < 50) {
            alert('í›„ê¸°ëŠ” ìµœì†Œ 50ì ì´ìƒ ì‘ì„±í•´ì£¼ì„¸ìš”.');
            document.getElementById('reviewText').focus();
            return;
        }
        
        showPage(3);
    });


    // ë¼ë””ì˜¤ ë²„íŠ¼ ìŠ¤íƒ€ì¼ ë° ì¿ í° ì„¤ëª… ì—…ë°ì´íŠ¸
    const couponDescriptionDiv = document.getElementById('couponDescription');

    document.querySelectorAll('.radio-option').forEach(option => {
      option.addEventListener('click', function() {
        const radioInput = this.querySelector('input[type="radio"]');
        const radioName = radioInput.name;
        
        // ìŠ¤íƒ€ì¼ ì—…ë°ì´íŠ¸
        document.querySelectorAll(`input[name="${radioName}"]`).forEach(input => {
              input.parentElement.classList.remove('selected');
        });
        this.classList.add('selected');
        radioInput.checked = true;

        // ì¿ í° í”„ë¡œê·¸ë¨ ì„¤ëª… ì—…ë°ì´íŠ¸
        if (radioName === 'couponProgram' && couponDescriptionDiv) {
            const selectedValue = radioInput.value;
            if (couponDescriptions[selectedValue]) {
              couponDescriptionDiv.innerHTML = couponDescriptions[selectedValue];
            }
        }
      });
    });
    
    // ë³„ì  ê¸°ëŠ¥
    const stars = document.querySelectorAll('.star');
    const ratingValue = document.getElementById('ratingValue');
    
    stars.forEach(star => {
      star.addEventListener('click', function() {
        const rating = this.dataset.rating;
        ratingValue.value = rating;
        
        stars.forEach(s => {
          if (s.dataset.rating <= rating) {
            s.classList.remove('inactive');
            s.classList.add('active');
          } else {
            s.classList.remove('active');
            s.classList.add('inactive');
          }
        });
      });
    });

    // ê¸€ì ìˆ˜ ì¹´ìš´íŠ¸
    const reviewText = document.getElementById('reviewText');
    const charCount = document.getElementById('charCount');
    const charCountDiv = document.getElementById('charCountDiv');
    
    reviewText.addEventListener('input', function() {
      const count = this.value.length;
      charCount.textContent = count;
      
      if (count >= 50) {
        charCountDiv.classList.add('valid');
      } else {
        charCountDiv.classList.remove('valid');
      }
    });

    // ìµœì¢… í¼ ì œì¶œ (Page 3ì—ì„œ ì‹¤í–‰)
    document.getElementById('reviewForm').addEventListener('submit', function(e) {
      e.preventDefault();
      
      // Page 3 ìœ íš¨ì„± ê²€ì‚¬ (ì„ íƒì‚¬í•­ì´ë¯€ë¡œ í•„ìˆ˜ëŠ” ì•„ë‹ˆì§€ë§Œ, ì´ë¦„ë§Œ ì“°ê³  ì—°ë½ì²˜ ì•ˆì“°ëŠ” ê²½ìš° ë“± ì²´í¬ ê°€ëŠ¥)
      // ì—¬ê¸°ì„œëŠ” íŠ¹ë³„í•œ ì œì•½ ì—†ì´ ì œì¶œí•©ë‹ˆë‹¤.
      
      document.getElementById('form-container').style.display = 'none';
      document.getElementById('loadingDiv').style.display = 'block';

      const formData = new FormData(this);
      const data = Object.fromEntries(formData);

      // Google Apps Script URL
      const scriptUrl = 'https://script.google.com/macros/s/AKfycbzihZH36A-G7nGdD-TgbDVRp8WTiw7yzHDkqBOTF_dlK8JKr2-YBSeGPcrrL-lsRcbq/exec';
      
      fetch(scriptUrl, {
        method: 'POST',
        mode: 'no-cors',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify(data)
      }).catch(err => console.log('ì œì¶œ ì™„ë£Œ'));

      // 3ì´ˆ ì¹´ìš´íŠ¸ë‹¤ìš´
      let countdown = 3;
      const countdownSpan = document.getElementById('countdown');
      countdownSpan.textContent = countdown + 'ì´ˆ';
      
      const countdownInterval = setInterval(() => {
        countdown--;
        if (countdown > 0) {
          countdownSpan.textContent = countdown + 'ì´ˆ';
        } else {
          clearInterval(countdownInterval);
          document.getElementById('loadingDiv').style.display = 'none';
          document.getElementById('successMessage').style.display = 'block';
        }
      }, 1000);
    });
  </script>
</body>
</html>
