<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Re:Al í›„ê¸° ì‘ì„±</title>
  <style>
      * { margin: 0; padding: 0; box-sizing: border-box; }
      body {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Malgun Gothic', sans-serif;
          /* ë°°ê²½ìƒ‰: ë” ë°ì€ ì˜ë¡œìš°/ì˜¤ë Œì§€ ê³„ì—´ë¡œ ë³€ê²½ */
          background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
          min-height: 100vh;
          padding: 20px;
          
          /* ë°°ì¹˜ í†µì¼: ìœ„ì•„ë˜ ì¤‘ì•™ ì •ë ¬ (ê³µë°± ì˜¤ë¥˜ ìˆ˜ì •ë¨) */
          display: flex;
          justify-content: center;
          align-items: center;
      }

      .container {
          /* ë°°ì¹˜ í†µì¼: ìµœëŒ€ ë„ˆë¹„ 700px, ë‚´ë¶€ ì—¬ë°± 40px ìœ ì§€ */
          max-width: 700px;
          margin: 0 auto;
          width: 100%; 
          
          background: white;
          border-radius: 20px;
          padding: 40px; 
          
          box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      }

      /* ì œëª© ìƒ‰ìƒ: ë°ì€ ì˜¤ë Œì§€/ì˜ë¡œìš° ê°•ì¡°ìƒ‰ */
      h1 {
          text-align: center;
          color: #FFA500;
          margin-bottom: 15px;
          font-size: 28px;
      }
      .subtitle {
          text-align: center;
          color: #ff6b6b; /* í•„ìˆ˜ ìš”ì†Œ ê°•ì¡° ìƒ‰ìƒ (ë¹¨ê°„ìƒ‰) */
          margin-bottom: 30px;
          font-size: 16px;
          font-weight: 600;
      }
      .divider {
          text-align: center;
          color: #ddd;
          margin-bottom: 30px;
          letter-spacing: 2px;
      }
      .page {
          display: none;
      }
      .page.active {
          display: block;
          animation: fadeIn 0.3s;
      }
      @keyframes fadeIn {
          from { opacity: 0; transform: translateY(10px); }
          to { opacity: 1; transform: translateY(0); }
      }
      .form-group {
          margin-bottom: 25px;
      }
      label {
          display: block;
          margin-bottom: 8px;
          font-weight: 600;
          color: #333;
          font-size: 15px;
      }
      /* í•„ìˆ˜ í‘œì‹œ(*) ìƒ‰ìƒ: #ff6b6b (ì ìš© ì™„ë£Œ) */
      .required { color: #ff6b6b; } 
      
      input[type="text"], input[type="tel"], textarea {
          width: 100%;
          padding: 14px;
          border: 2px solid #e0e0e0;
          border-radius: 10px;
          font-size: 16px;
          transition: all 0.3s;
          font-family: inherit;
      }
      /* í¬ì»¤ìŠ¤ ìƒ‰ìƒ: ë°ì€ ê³¨ë“œ */
      input:focus, textarea:focus {
          outline: none;
          border-color: #FFD700;
          box-shadow: 0 0 0 3px rgba(255, 215, 0, 0.3);
      }
      textarea {
          min-height: 150px;
          resize: vertical;
          line-height: 1.6;
      }
      
      /* ì—°ë½ì²˜ 3ì¹¸ */
      .phone-group {
          display: flex;
          gap: 10px;
          align-items: center;
      }
      .phone-group input {
          flex: 1;
          text-align: center;
      }
      .phone-group input:first-child {
          flex: 0.8;
          background: #f5f5f5;
          color: #666;
      }
      
      /* í”„ë¡œê·¸ë¨ ì„ íƒ - ê°€ë¡œ ë°°ì¹˜ */
      .radio-group {
          display: flex;
          gap: 10px;
      }
      .radio-option {
          flex: 1;
          display: flex;
          align-items: center;
          justify-content: center;
          padding: 15px 10px;
          border: 2px solid #e0e0e0;
          border-radius: 10px;
          cursor: pointer;
          transition: all 0.3s;
          text-align: center;
      }
      /* í˜¸ë²„/ì„ íƒ ìƒ‰ìƒ: ë°ì€ ê³¨ë“œ */
      .radio-option:hover {
          border-color: #FFD700;
          background: #FFFDE7; /* ë” ë°ì€ ë°°ê²½ */
      }
      .radio-option input[type="radio"] {
          display: none;
      }
      .radio-option.selected {
          border-color: #FFD700;
          background: #FFFDE7;
          font-weight: 600;
      }
      
      .guide {
          font-size: 14px;
          color: #666;
          margin-bottom: 12px;
          line-height: 1.6;
          background: #f8f9fa;
          padding: 12px;
          border-radius: 8px;
      }
      
      .char-count {
          text-align: right;
          font-size: 13px;
          color: #999;
          margin-top: 5px;
      }
      .char-count.valid { color: #28a745; }
      .stars {
          display: flex;
          gap: 8px;
          font-size: 40px;
          margin-top: 10px;
      }
      .star {
          cursor: pointer;
          transition: all 0.2s;
          user-select: none;
      }
      .star:hover {
          transform: scale(1.2);
      }
      .star.inactive { 
          filter: grayscale(100%);
          opacity: 0.3;
      }
      .star.active { 
          filter: grayscale(0%);
          animation: starPop 0.3s;
      }
      @keyframes starPop {
          0% { transform: scale(1); }
          50% { transform: scale(1.3); }
          100% { transform: scale(1); }
      }
      .checkbox-group {
          margin-top: 10px;
      }
      .checkbox-option {
          display: flex;
          align-items: flex-start;
          padding: 15px;
          border: 2px solid #e0e0e0;
          border-radius: 10px;
          cursor: pointer;
          transition: all 0.3s;
      }
      /* í˜¸ë²„/ì„ íƒ ìƒ‰ìƒ: ë°ì€ ê³¨ë“œ */
      .checkbox-option:hover {
          border-color: #FFD700;
          background: #FFFDE7;
      }
      .checkbox-option.checked {
          border-color: #FFD700;
          background: #FFFDE7;
      }
      .checkbox-option input[type="checkbox"] {
          width: 20px;
          height: 20px;
          margin-right: 12px;
          margin-top: 2px;
          cursor: pointer;
      }
      .gift-notice {
          /* ì„ ë¬¼ ê°•ì¡°ë¥¼ ìœ„í•´ ê¸°ì¡´ì˜ ê³¨ë“œ ê³„ì—´ ìœ ì§€ */
          background: linear-gradient(135deg, #fff3cd 0%, #ffe8a1 100%);
          padding: 15px;
          border-radius: 10px;
          font-size: 14px;
          color: #856404;
          margin-top: 15px;
          text-align: center;
          font-weight: 600;
      }
      .button-group {
          display: flex;
          gap: 10px;
          margin-top: 30px;
      }
      .btn {
          flex: 1;
          padding: 16px;
          border: none;
          border-radius: 10px;
          font-size: 17px;
          font-weight: 600;
          cursor: pointer;
          transition: all 0.3s;
      }
      .btn-prev {
          background: #f0f0f0;
          color: #666;
      }
      .btn-prev:hover {
          background: #e0e0e0;
      }
      /* ë²„íŠ¼ ìƒ‰ìƒ: ë°ì€ ê³¨ë“œ ê·¸ë¼ë°ì´ì…˜ */
      .btn-next, .btn-submit {
          background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
          color: white;
      }
      .btn-next:hover, .btn-submit:hover {
          transform: translateY(-2px);
          box-shadow: 0 5px 20px rgba(255, 215, 0, 0.4);
      }
      .btn:disabled {
          background: #ccc;
          cursor: not-allowed;
          transform: none;
      }
      
      /* === í˜ì´ì§€ ì¸ë””ì¼€ì´í„° ìŠ¤íƒ€ì¼ (ìˆ˜ì •ë¨) === */
      .page-indicator {
          text-align: center;
          margin-bottom: 20px; 
          font-size: 14px;
          color: #999;
      }
      .page-dots {
          display: flex;
          justify-content: center;
          gap: 10px; /* ê°„ê²© í™•ëŒ€ */
          margin-bottom: 10px; /* ìˆ«ì ë°•ìŠ¤ì™€ ë¶„ë¦¬ */
      }
      .dot {
          width: 10px; /* êµµê¸° ì¦ê°€ */
          height: 10px;
          border-radius: 50%;
          background: #ddd;
          transition: all 0.3s;
      }
      /* í˜„ì¬ í˜ì´ì§€ í‘œì‹œ ì  ìƒ‰ìƒ: ë°ì€ ê³¨ë“œ */
      .dot.active {
          background: #FFD700;
          width: 28px; /* í™œì„±í™”ëœ ì ì˜ ê¸¸ì´ ì¦ê°€ */
          border-radius: 5px; /* ëª¨ì„œë¦¬ ë‘¥ê¸€ê²Œ */
      }
      #pageText {
          /* ìˆ«ì í‘œì‹œë¥¼ ë°°ê²½ ë°•ìŠ¤ ì•ˆì— ë°°ì¹˜ */
          display: inline-block;
          padding: 5px 15px;
          border-radius: 15px;
          font-size: 15px;
          font-weight: 700;
          color: #FFA500; /* ì˜¤ë Œì§€ìƒ‰ í…ìŠ¤íŠ¸ */
          background: #FFFDE7; /* ë°ì€ ì˜ë¡œìš° ë°°ê²½ */
          border: 1px solid #FFD700;
      }
      /* ================================== */
      
      .loading {
          display: none;
          text-align: center;
          padding: 40px;
      }
      .spinner {
          border: 4px solid #f3f3f3;
          /* ìŠ¤í”¼ë„ˆ ìƒ‰ìƒ: ë°ì€ ê³¨ë“œ */
          border-top: 4px solid #FFD700;
          border-radius: 50%;
          width: 50px;
          height: 50px;
          animation: spin 1s linear infinite;
          margin: 0 auto 20px;
      }
      @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
      }
      .success-message {
          display: none;
          text-align: center;
          padding: 40px;
      }
      .success-icon {
          font-size: 60px;
          margin-bottom: 20px;
      }
      /* ì„±ê³µ ë©”ì‹œì§€ ì œëª© ìƒ‰ìƒ: ë°ì€ ì˜¤ë Œì§€/ì˜ë¡œìš° ê°•ì¡°ìƒ‰ */
      .success-message h2 {
          color: #FFA500;
          margin-bottom: 15px;
          font-size: 24px;
      }
      .success-message p {
          color: #666;
          line-height: 1.8;
          font-size: 15px;
      }
  </style>
</head>
<body>
  <div class="container">
    <div id="form-container">
      
      <div class="page-indicator">
        <div class="page-dots">
          <div class="dot active" data-page="1"></div>
          <div class="dot" data-page="2"></div>
        </div>
        
        <span id="pageText">1 / 2</span> 
      </div>
      
      <h1>âœ¨í›„ê¸° ì‘ì„±</h1>
      <p class="subtitle">ì†Œì¤‘í•œ í›„ê¸° ê°ì‚¬í•©ë‹ˆë‹¤!</p>
      <div class="divider">â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</div>
      <form id="reviewForm">
        <div class="page active" id="page1">
          <div class="form-group">
            <label>1. ì´ë¦„ <span class="required">*</span></label>
            <input type="text" name="nickname" id="nickname" required placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”" autofocus>
          </div>

          <div class="form-group">
            <label>2. ì—°ë½ì²˜ <span class="required">*</span></label>
            <div class="phone-group">
              <input type="tel" id="phone1" value="010" readonly>
              <input type="tel" id="phone2" maxlength="4" required placeholder="1234" inputmode="numeric" pattern="[0-9]*">
              <input type="tel" id="phone3" maxlength="4" required placeholder="1234" inputmode="numeric" pattern="[0-9]*">
            </div>
            <input type="hidden" name="phone" id="phoneHidden" required>
          </div>
          
          <div class="button-group">
            <button type="button" class="btn btn-next" id="nextBtn">ë‹¤ìŒ</button>
          </div>
        </div>

        <div class="page" id="page2">
          <div class="form-group">
            <label>3. í›„ê¸° ë‚´ìš© (ìµœì†Œ 50ì) <span class="required">*</span></label>
            <div class="guide">
              ğŸ’¡ ê°€ì´ë“œ:<br>
              â€¢ ì–´ë–¤ ë³€í™”ë¥¼ ëŠê¼ˆë‚˜ìš”?<br>â€¢ ê°€ì¥ ì¢‹ì•˜ë˜ ì ì€? / ì¶”ì²œí•˜ê³  ì‹¶ì€ ì´ìœ ëŠ”?<br><br>
              <span style="color: #999; font-size: 12px;">
                <strong><ê°€ì¥ ë§ì•˜ë˜ í›„ê¸°></strong><br>
                <strong>P-ìŠ¤íŠ¸ë ˆì¹­)</strong> "ì „ë¬¸ê°€ì˜ ì†ê¸¸ì´ ë‹¤ë¥´ê¸´ ë‹¤ë¥´ë„¤ìš”", "ë­ê°€ ë¬¸ì œì˜€ëŠ”ì§€ í™•ì‹¤íˆ ì•Œì•˜ì–´ìš”", "ê±°ë¶ëª©ì´ í™• í´ì§€ëŠ” ëŠë‚Œ!"<br><br>
                <strong>ì‘ì€ì–¼êµ´)</strong> "í„±ì„ ì´ ì‚´ì•„ë‚¬ì–´ìš”", "ê¾¸ì¤€í•˜ê²Œ í•˜ë©´ ì§„ì§œ ë  ê²ƒ ê°™ì€ ëŠë‚Œì´ í™• ë“¤ì—ˆì–´ìš”", "ê·¸ë™ì•ˆ ë°›ì•˜ë˜ ì—ìŠ¤í…Œí‹±ì´ë€ ì™„ì „ ë‹¬ë¼ìš”"<br><br>
                <strong>ì¸ì‚¬ì´ë“œ)</strong> "ì§„ì§œ ì‹ ê¸°í•´ìš”. ì„±í–¥ë¶„ì„ ì™„ì „ ì •í™•í•´ìš”", "ëª©í‘œë¥¼ ì°¾ì€ê²ƒ ê°™ì•„ìš”", "ë‚´ ì¬ëŠ¥ì´ ë­”ì§€ í™•ì‹¤íˆ ì•Œê² ì–´ìš”"<br><br>
              </span>
            </div>
            
            <textarea name="review" id="reviewText" required placeholder="í›„ê¸°ë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”..."></textarea>
            <div class="char-count" id="charCountDiv">
              <span id="charCount">0</span> / 50ì
            </div>
          </div>

          <div class="form-group" style="text-align: center;"> 
            <div class="stars" id="starRating" style="justify-content: center; margin-top: 15px; margin-bottom: 25px;"> 
              <span class="star active" data-rating="1">â­</span>
              <span class="star active" data-rating="2">â­</span>
              <span class="star active" data-rating="3">â­</span>
              <span class="star active" data-rating="4">â­</span>
              <span class="star active" data-rating="5">â­</span>
            </div>
              <input type="hidden" name="rating" id="ratingValue" value="5" required>
          </div>

          <div class="form-group">
            <label>4. ì£¼ë³€ì— ì¶”ì²œí•˜ê³  ì‹¶ì€ ë¶„ì´ ê³„ì‹ ê°€ìš”? (ì„ íƒ)</label>

            <div class="guide" style="margin-bottom: 15px; background: linear-gradient(135deg, #fff3cd 0%, #ffe8a1 100%); border-left: 4px solid #ff6b6b;"> 
              <span style="font-size: 15px; color: #333;">ğŸ <strong>ì†Œê°œí•˜ê³  ì‹¶ì€ ë¶„ì´ ë”± ë– ì˜¤ë¥¸ë‹¤ë©´!</strong></span><br>
              <span style="font-size: 13px; color: #856404;">â†’ ì‚¬ìš© ê°€ëŠ¥í•œ 1íšŒ ë¬´ë£Œ ì¿ í°ì„ ë“œë ¤ìš”.</span>
            </div>
            
            <div class="checkbox-group">
              <label class="checkbox-option" style="border: 2px solid #ff6b6b;">
                <input type="checkbox" name="hasReferral" id="hasReferral" value="yes">
                <span style="font-weight: 600;">ë„¤, í•œ ë¶„ ë– ì˜¬ëì–´ìš”!</span>
              </label>
            </div>
            
            <div id="couponProgramSelect" style="margin-top: 15px; padding: 15px; background: #FFFDE7; border-radius: 10px; border: 2px solid #FFA500;">
              
              <label style="font-size: 14px; color: #FFA500; margin-bottom: 8px; font-weight: 600;">ì¿ í° í”„ë¡œê·¸ë¨ ì„ íƒ:</label>
              <div class="radio-group">
                <label class="radio-option">
                  <input type="radio" name="couponProgram" value="P-ìŠ¤íŠ¸ë ˆì¹­">
                  <span>P-ìŠ¤íŠ¸ë ˆì¹­</span>
                </label>
                <label class="radio-option">
                  <input type="radio" name="couponProgram" value="ì‘ì€ì–¼êµ´">
                  <span>ì‘ì€ì–¼êµ´</span>
                </label>
                <label class="radio-option">
                  <input type="radio" name="couponProgram" value="ì¸ì‚¬ì´ë“œ">
                  <span>ì¸ì‚¬ì´ë“œ</span>
                </label>
              </div>
              <div id="couponDescription" style="margin-top: 15px; padding: 10px; border-radius: 8px; background: #ffffff; border-left: 3px solid #FFA500; font-size: 13px; min-height: 40px; color: #333;">
                í”„ë¡œê·¸ë¨ì„ ì„ íƒí•˜ì‹œë©´ ê°„ëµí•œ ì„¤ëª…ì´ í‘œì‹œë©ë‹ˆë‹¤.
              </div>
            </div> Â  Â  Â  Â  Â  Â 
          </div>

          <div class="button-group">
            <button type="button" class="btn btn-prev" id="prevBtn">ì´ì „</button>
            <button type="submit" class="btn btn-submit" id="submitBtn">ì œì¶œí•˜ê¸°</button>
          </div>
        </div>
      </form>
    </div>

    <div class="loading" id="loadingDiv">
      <div class="spinner"></div>
      <p id="loadingText">â³ ì œì¶œ ì¤‘ì…ë‹ˆë‹¤... <span id="countdown"></span></p>
    </div>

    <div class="success-message" id="successMessage">
      <div class="success-icon">âœ…</div>
      <h2>í›„ê¸° ê°ì‚¬í•©ë‹ˆë‹¤!</h2>
      <p>
        ê±´ê°•ê³¼ íë§ì˜ ë‚˜ì¹¨ë°˜ | íë§íŠ¸ë¦¬<br>
      </p>
    </div>
  </div>

  <script>
    let currentPage = 1;

    // í”„ë¡œê·¸ë¨ ì„¤ëª… ë°ì´í„°
    const couponDescriptions = {
      "P-ìŠ¤íŠ¸ë ˆì¹­": "<strong>ëª©ì :</strong> ë§Œì„± í†µì¦ ê´€ë¦¬ ë° ìì„¸ êµì •.<br> <strong>ì´ì :</strong> ìœ ì—°ì„± íšŒë³µê³¼ ê±°ë¶ëª©, êµ½ì€ ì–´ê¹¨, í—ˆë¦¬ ë»ê·¼í•¨ ì™„í™”ì— íš¨ê³¼ì ì…ë‹ˆë‹¤.",
      "ì‘ì€ì–¼êµ´": "<strong>ëª©ì :</strong> í„±ë¼ì¸ ê°œì„  ë° ë¦¼í”„ ìˆœí™˜ ì´‰ì§„.<br> <strong>ì´ì :</strong> Vë¼ì¸, í„±ì„  ì •ë¦¬, ë¶€ì¢… ì œê±° ë° ì•ˆë©´ ìœ¤ê³½ ê´€ë¦¬ì— íƒì›”í•©ë‹ˆë‹¤.",
      "ì¸ì‚¬ì´ë“œ": "<strong>ëª©ì :</strong> ë‚´ë©´ì˜ ì„±í–¥ ë° ì¬ëŠ¥ ë¶„ì„.<br> <strong>ì´ì :</strong> ì ì¬ë ¥ ë°œê²¬, ëª©í‘œ ì„¤ì •, ìê¸° ì´í•´ ì¦ì§„ì„ í†µí•´ ì¸ìƒì˜ ë°©í–¥ì„±ì„ ì œì‹œí•©ë‹ˆë‹¤."
    };

    // í˜ì´ì§€ ë¡œë“œ ì‹œ ì²« ë²ˆì§¸ ì…ë ¥ì¹¸ì— í¬ì»¤ìŠ¤
    window.addEventListener('load', function() {
      document.getElementById('nickname').focus();
    });

    // í˜ì´ì§€ ì „í™˜
    function showPage(pageNum) {
      document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
      document.getElementById('page' + pageNum).classList.add('active');
      
      document.querySelectorAll('.dot').forEach(d => d.classList.remove('active'));
      document.querySelector(`.dot[data-page="${pageNum}"]`).classList.add('active');
      
      document.getElementById('pageText').textContent = `${pageNum} / 2`;
      currentPage = pageNum;

      // 2í˜ì´ì§€ ì§„ì… ì‹œ í›„ê¸° ì…ë ¥ì¹¸ì— í¬ì»¤ìŠ¤ (Page 2ì—ì„œ í¬ì»¤ìŠ¤ê°€ í›„ê¸° ë‚´ìš© ë°•ìŠ¤ë¡œ ë³€ê²½ë¨)
      if (pageNum === 2) {
        setTimeout(() => {
          document.getElementById('reviewText').focus();
        }, 100);
      }
    }

    // ì—°ë½ì²˜ ìë™ ì´ë™
    const phone2 = document.getElementById('phone2');
    const phone3 = document.getElementById('phone3');

    phone2.addEventListener('input', function(e) {
      e.target.value = e.target.value.replace(/[^0-9]/g, '');
      if (e.target.value.length === 4) {
        phone3.focus();
      }
      updatePhoneHidden();
    });

    phone3.addEventListener('input', function(e) {
      e.target.value = e.target.value.replace(/[^0-9]/g, '');
      updatePhoneHidden();
    });

    function updatePhoneHidden() {
      const phone1 = document.getElementById('phone1').value;
      const phone2Val = phone2.value;
      const phone3Val = phone3.value;
      document.getElementById('phoneHidden').value = `${phone1}-${phone2Val}-${phone3Val}`;
    }

    // ì§€ì¸ ì†Œê°œ ì—°ë½ì²˜ ìë™ í¬ë§·íŒ… (ì°¸ê³ : í˜„ì¬ HTMLì— referralPhone í•­ëª©ì€ ì—†ìœ¼ë‚˜, ê¸°ì¡´ ìŠ¤í¬ë¦½íŠ¸ì˜ í•´ë‹¹ ë¡œì§ì€ ìœ ì§€ë¨)
    const referralPhone = document.getElementById('referralPhone');
    if (referralPhone) {
      referralPhone.addEventListener('input', function(e) {
        let value = e.target.value.replace(/[^0-9]/g, '');
        if (value.length > 3 && value.length <= 7) {
          value = value.slice(0, 3) + '-' + value.slice(3);
        } else if (value.length > 7) {
          value = value.slice(0, 3) + '-' + value.slice(3, 7) + '-' + value.slice(7, 11);
        }
        e.target.value = value;
      });
    }

    // ë‹¤ìŒ ë²„íŠ¼ (Page 1 ìœ íš¨ì„± ê²€ì‚¬ - í”„ë¡œê·¸ë¨ ì„ íƒ ë¡œì§ ì œê±°ë¨)
    document.getElementById('nextBtn').addEventListener('click', function() {
      const nickname = document.getElementById('nickname').value.trim();
      const phone2Val = phone2.value.trim();
      const phone3Val = phone3.value.trim();

      if (!nickname) {
        alert('ì´ë¦„ or ë³„ëª…ì„ ì‘ì„±í•´ì£¼ì„¸ìš”.');
        document.getElementById('nickname').focus();
        return;
      }
      if (phone2Val.length !== 4) {
        alert('ì—°ë½ì²˜ë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”.\në‘ ë²ˆì§¸ ì¹¸ì— 4ìë¦¬ ìˆ«ìë¥¼ ì…ë ¥í•˜ì„¸ìš”.');
        phone2.focus();
        return;
      }
      if (phone3Val.length !== 4) {
        alert('ì—°ë½ì²˜ë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”.\nì„¸ ë²ˆì§¸ ì¹¸ì— 4ìë¦¬ ìˆ«ìë¥¼ ì…ë ¥í•˜ì„¸ìš”.');
        phone3.focus();
        return;
      }

      updatePhoneHidden();
      showPage(2);
      window.scrollTo(0, 0);
    });

    // ì´ì „ ë²„íŠ¼
    document.getElementById('prevBtn').addEventListener('click', function() {
      showPage(1);
      window.scrollTo(0, 0);
    });

    // ë¼ë””ì˜¤ ë²„íŠ¼ ìŠ¤íƒ€ì¼ ë° ì¿ í° ì„¤ëª… ì—…ë°ì´íŠ¸
    const couponDescriptionDiv = document.getElementById('couponDescription');

    document.querySelectorAll('.radio-option').forEach(option => {
      option.addEventListener('click', function() {
        const radioInput = this.querySelector('input[type="radio"]');
        const radioName = radioInput.name;
        
        // 1. ìŠ¤íƒ€ì¼ ì—…ë°ì´íŠ¸
        document.querySelectorAll(`input[name="${radioName}"]`).forEach(input => {
              input.parentElement.classList.remove('selected');
        });
        this.classList.add('selected');
        radioInput.checked = true;

        // 3. ì¿ í° í”„ë¡œê·¸ë¨ ì„¤ëª… ì—…ë°ì´íŠ¸
        if (radioName === 'couponProgram' && couponDescriptionDiv) {
            const selectedValue = radioInput.value;
            if (couponDescriptions[selectedValue]) {
              couponDescriptionDiv.innerHTML = couponDescriptions[selectedValue];
            }
        }
      });
    });

    // ì²´í¬ë°•ìŠ¤ ìŠ¤íƒ€ì¼ (ì˜ì—­ í´ë¦­ ì‹œì—ë„ ì²´í¬/í•´ì œ ë˜ë„ë¡)
    document.querySelectorAll('.checkbox-option').forEach(option => {
      const checkbox = option.querySelector('input[type="checkbox"]');
      
      // 1. ì˜ì—­ í´ë¦­ ì‹œ ì´ë²¤íŠ¸ ì²˜ë¦¬
      option.addEventListener('click', function(e) {
        if (e.target !== checkbox) {
            e.preventDefault(); 
            checkbox.checked = !checkbox.checked;
        }
        this.classList.toggle('checked', checkbox.checked);
        
        // ì§€ì¸ ì¶”ì²œ ì²´í¬ ì‹œ í•˜ë‹¨ìœ¼ë¡œ ìŠ¤í¬ë¡¤ (NEW)
        if (checkbox.id === 'hasReferral' && checkbox.checked) {
            setTimeout(() => {
                window.scrollTo({
                    top: document.body.scrollHeight,
                    behavior: 'smooth'
                });
            }, 300);
        }
      });

      // 2. ì²´í¬ë°•ìŠ¤ ìì²´ì˜ ìƒíƒœ ë³€ê²½ ì‹œ ìŠ¤íƒ€ì¼ ì ìš©
      checkbox.addEventListener('change', function() {
        checkbox.parentElement.classList.toggle('checked', this.checked);
        
        // ì§€ì¸ ì¶”ì²œ ì²´í¬ ì‹œ í•˜ë‹¨ìœ¼ë¡œ ìŠ¤í¬ë¡¤ (NEW)
        if (this.id === 'hasReferral' && this.checked) {
            setTimeout(() => {
                window.scrollTo({
                    top: document.body.scrollHeight,
                    behavior: 'smooth'
                });
            }, 300);
        }
      });
    });
    
    // ë³„ì  ê¸°ëŠ¥ (ê¸°ë³¸ê°’ 5ê°œ)
    const stars = document.querySelectorAll('.star');
    const ratingValue = document.getElementById('ratingValue');
    
    stars.forEach(star => {
      star.addEventListener('click', function() {
        const rating = this.dataset.rating;
        ratingValue.value = rating;
        
        stars.forEach(s => {
          if (s.dataset.rating <= rating) {
            s.classList.remove('inactive');
            s.classList.add('active');
          } else {
            s.classList.remove('active');
            s.classList.add('inactive');
          }
        });
      });
    });

    // ê¸€ì ìˆ˜ ì¹´ìš´íŠ¸
    const reviewText = document.getElementById('reviewText');
    const charCount = document.getElementById('charCount');
    const charCountDiv = document.getElementById('charCountDiv');
    
    reviewText.addEventListener('input', function() {
      const count = this.value.length;
      charCount.textContent = count;
      
      if (count >= 50) {
        charCountDiv.classList.add('valid');
      } else {
        charCountDiv.classList.remove('valid');
      }
    });

    // í¼ ì œì¶œ
    document.getElementById('reviewForm').addEventListener('submit', function(e) {
      e.preventDefault();
      
      const review = reviewText.value.trim();
      if (review.length < 50) {
        alert('í›„ê¸°ëŠ” ìµœì†Œ 50ì ì´ìƒ ì‘ì„±í•´ì£¼ì„¸ìš”.');
        reviewText.focus();
        return;
      }
      
      if (!ratingValue.value) {
        alert('ë³„ì ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
        return;
      }

      document.getElementById('form-container').style.display = 'none';
      document.getElementById('loadingDiv').style.display = 'block';

      const formData = new FormData(this);
      const data = Object.fromEntries(formData);

      // Google Apps Script URLë¡œ ì¦‰ì‹œ ì œì¶œ (ì‘ë‹µ ëŒ€ê¸° ì•ˆ í•¨)
      const scriptUrl = 'https://script.google.com/macros/s/AKfycbzihZH36A-G7nGdD-TgbDVRp8WTiw7yzHDkqBOTF_dlK8JKr2-YBSeGPcrrL-lsRcbq/exec';
      
      // ë°±ê·¸ë¼ìš´ë“œë¡œ ì¦‰ì‹œ ì œì¶œ (ì‘ë‹µ ì•ˆ ê¸°ë‹¤ë¦¼)
      fetch(scriptUrl, {
        method: 'POST',
        mode: 'no-cors',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify(data)
      }).catch(err => console.log('ì œì¶œ ì™„ë£Œ'));

      // 3ì´ˆ ì¹´ìš´íŠ¸ë‹¤ìš´ë§Œ í‘œì‹œ (ì§§ê²Œ ë‹¨ì¶•)
      let countdown = 3;
      const countdownSpan = document.getElementById('countdown');
      countdownSpan.textContent = countdown + 'ì´ˆ';
      
      const countdownInterval = setInterval(() => {
        countdown--;
        if (countdown > 0) {
          countdownSpan.textContent = countdown + 'ì´ˆ';
        } else {
          clearInterval(countdownInterval);
          // ì¹´ìš´íŠ¸ë‹¤ìš´ ì™„ë£Œ í›„ ì„±ê³µ í™”ë©´
          document.getElementById('loadingDiv').style.display = 'none';
          document.getElementById('successMessage').style.display = 'block';
        }
      }, 1000);
    });
  </script>
</body>
</html>
